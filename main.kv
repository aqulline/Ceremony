#:import sm kivy.uix.screenmanager
ScreenManager:
    id:manager
    transition:sm.FadeTransition(duration=.0)
    MDScreen:
        name:"login"
        MDFloatLayout:
            orientation:"vertical"
            md_bg_color:"#eaf4f4"
            MDLabel:
                text:"Customer Number"
                size_hint_y: .1
                height: self.texture_size[1]
                halign:"center"
                font_size:"18sp"
                color:"#474747"
                pos_hint:{"center_x":.27, "center_y":.64}
            NumberOnlyField:
                id:user_number
                mode: "rectangle"
                hint_text:"Enter ceremony name"
                size_hint_x:.8
                pos_hint:{"center_x":.5, "center_y":.57}
                font_size: dp(18)
                foreground_color: 53 / 225, 59 / 225, 60 / 225, 1
                line_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                fill_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                hint_text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                halign: 'left'
            MDLabel:
                text:"password"
                size_hint_y: .1
                height: self.texture_size[1]
                halign:"center"
                font_size:"18sp"
                color:"#474747"
                pos_hint:{"center_x":.2, "center_y":.48}
            MDTextField:
                id:password
                mode: "rectangle"
                hint_text:"Enter ceremony name"
                size_hint_x:.8
                password:True
                pos_hint:{"center_x":.5, "center_y":.42}
                font_size: dp(18)
                foreground_color: 53 / 225, 59 / 225, 60 / 225, 1
                line_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                fill_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                hint_text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                halign: 'left'
            MDRaisedButton:
                text:"Submit"
                md_bg_color:  "#0B4F6C"
                text_color: "#FFFFFF"
                size_hint:.5,.08
                pos_hint:{"center_x":.5, "center_y":.2}
                on_release:
                    app.user_login_opt()

    MDScreen:
        name:"home"
        md_bg_color:"#eaf4f4"
        MDBottomNavigation:
            id:bnav
            panel_color:"#FFFFFF"
            selected_color_background: "#eaf4f4"
            text_color_active: "#0B4F6C"
            MDBottomNavigationItem:
                name: 'home'
                text: 'Home'
                icon: 'home'
                MDFloatLayout:
					md_bg_color:"#eaf4f4"
					MDLabel:
                        text:"Dashboard"
                        halign:"center"
                        font_size:"22sp"
                        color:"#0B4F6C"
                        pos_hint:{"center_x":.2, "center_y":.95}
                    MDIcon:
                        icon:"crown-outline"
                        halign:"center"
                        font_size:"30dp"
                        color:"#d4af37"
                        pos_hint:{"center_x":.92, "center_y":.95}
                    Carry:
                        pos_hint:{"center_x":.5, "center_y":.77}
                        MDFloatLayout:
                            MDLabel:
                                text:"Total Earnings(TZS)"
                                halign:"center"
                                color:"white"
                                pos_hint:{"center_x":.25, "center_y":.82}
                            MDLabel:
                                text:app.total_bill
                                halign:"left"
                                color:"white"
                                font_size:"30sp"
                                pos_hint:{"center_x":.6, "center_y":.5}
                            MDFloatingActionButton:
                                icon: "cash-fast"
                                type:"small"
                                md_bg_color:"#BCDCDC"
                                text_color:"#d4af37"
                                pos_hint:{"center_x":.8, "center_y":.25}
                                on_release:
                                    app.is_premium_screen()
                    MDLabel:
                        text:"Today Summary"
                        color:"#474747"
                        font_size:"18sp"
                        halign:"center"
                        pos_hint:{"center_x":.25, "center_y":.59}

                    Display:
                        name:"Deliveries"
                        number:app.today_deliveries
                        posx:.35
                        pos_hint:{"center_x":.27, "center_y":.46}

                    Display:
                        name:"Transaction"
                        number:app.today_orders
                        pos_hint:{"center_x":.72, "center_y":.46}

                    MDLabel:
                        text:"Quick Actions"
                        color:"#474747"
                        font_size:"18sp"
                        halign:"center"
                        pos_hint:{"center_x":.22, "center_y":.33}

                    MDFloatingActionButton:
                        icon: "account-heart"
                        type:"standard"
                        md_bg_color:"#BCDCDC"
                        text_color:"#2e4052"
                        pos_hint:{"center_x":.2, "center_y":.26}
                        on_release:
                            app.screen_capture("favourite")

                    MDLabel:
                        text:"special buyers"
                        color:"#474747"
                        font_size:"12sp"
                        halign:"center"
                        pos_hint:{"center_x":.2, "center_y":.19}

                    MDFloatingActionButton:
                        icon: "cart-arrow-up"
                        type:"standard"
                        md_bg_color:"#BCDCDC"
                        text_color:"#2e4052"
                        pos_hint:{"center_x":.4, "center_y":.26}
                        on_release:
                            app.screen_capture("sell")
                    MDLabel:
                        text:"send order"
                        color:"#474747"
                        font_size:"12sp"
                        halign:"center"
                        pos_hint:{"center_x":.4, "center_y":.19}

                    MDFloatingActionButton:
                        icon: "clipboard-text-outline"
                        type:"standard"
                        md_bg_color:"#BCDCDC"
                        text_color:"#2e4052"
                        pos_hint:{"center_x":.6, "center_y":.26}
                    MDLabel:
                        text:"My products"
                        color:"#474747"
                        font_size:"12sp"
                        halign:"center"
                        pos_hint:{"center_x":.6, "center_y":.19}

                    MDFloatingActionButton:
                        icon: "diamond-stone"
                        type:"standard"
                        md_bg_color:"#BCDCDC"
                        text_color:"#d4af37"
                        pos_hint:{"center_x":.8, "center_y":.26}
                        on_release:
                            app.is_premium_screen()
                    MDLabel:
                        text:"Go premium"
                        color:"#d4af37"
                        font_size:"12sp"
                        halign:"center"
                        pos_hint:{"center_x":.8, "center_y":.19}


            MDBottomNavigationItem:
                name: 'notify'
                text: 'Notify'
                icon: 'bell-ring'
				MDFloatLayout:
					md_bg_color:"#eaf4f4"
					MDLabel:
                        text:"Send Notification"
                        halign:"center"
                        font_size:"21sp"
                        color:"#0B4F6C"
                        pos_hint:{"center_x":.25, "center_y":.93}
                    Carry:
                        pos_hint:{"center_x":.5, "center_y":.7}
                        FloatLayout:
                            MDLabel:
                                text:"Total Customers"
                                halign:"center"
                                color:"white"
                                pos_hint:{"center_x":.25, "center_y":.82}
                            MDLabel:
                                text:app.total_buyers
                                halign:"left"
                                color:"white"
                                font_size:"33sp"
                                pos_hint:{"center_x":.6, "center_y":.5}
                            MDFloatingActionButton:
                                icon: "send-outline"
                                type:"small"
                                md_bg_color:"#BCDCDC"
                                text_color:"#d4af37"
                                pos_hint:{"center_x":.8, "center_y":.25}
                                on_release:
                                    app.sms_is_special = False
                                    app.send_sms_opt()
                    Carry:
                        pos_hint:{"center_x":.5, "center_y":.4}
                        size:app.size_x/1.2,app.size_y/6
                        FloatLayout:
                            MDLabel:
                                text:"Special Customers"
                                halign:"center"
                                color:"white"
                                pos_hint:{"center_x":.25, "center_y":.82}
                            MDLabel:
                                text:app.total_special
                                halign:"left"
                                color:"white"
                                font_size:"30sp"
                                pos_hint:{"center_x":.6, "center_y":.5}
                            MDFloatingActionButton:
                                icon: "send-outline"
                                type:"small"
                                md_bg_color:"#BCDCDC"
                                text_color:"#d4af37"
                                pos_hint:{"center_x":.8, "center_y":.28}
                                on_release:
                                    app.sms_is_special = True
                                    app.send_sms_opt()
                    MDFloatingActionButton:
                        icon: "pencil-outline"
                        type:"standard"
                        md_bg_color:"#BCDCDC"
                        text_color:"#2e4052"
                        pos_hint:{"center_x":.4, "center_y":.15}
                        on_release:
                            app.sms_type = 'sms'
                            app.sms_sent = app.user_sms
                            app.screen_capture("edit_sms")
                    MDLabel:
                        text:"edit text"
                        color:"#474747"
                        font_size:"12sp"
                        halign:"center"
                        pos_hint:{"center_x":.4, "center_y":.08}

                    MDFloatingActionButton:
                        icon: "pencil-plus"
                        type:"standard"
                        md_bg_color:"#BCDCDC"
                        text_color:"#2e4052"
                        pos_hint:{"center_x":.6, "center_y":.15}
                        on_release:
                            app.sms_type = 'special_sms'
                            app.sms_sent = app.user_special_sms
                            app.screen_capture("edit_sms")

                    MDLabel:
                        text:"edit special text"
                        color:"#474747"
                        font_size:"12sp"
                        halign:"center"
                        pos_hint:{"center_x":.6, "center_y":.08}

            MDBottomNavigationItem:
                name: 'buyers'
                text: 'Buyers'
                icon: 'account-group'
                MDBoxLayout:
                    id:buys
                    orientation:"vertical"
                    md_bg_color:"#eaf4f4"
#                    MDBoxLayout:
#                        adaptive_height:True
                    MDLabel:
                        text:"Buyers"
                        size_hint_y: .1
                        height: self.texture_size[1]
                        halign:"center"
                        font_size:"21sp"
                        color:"#0B4F6C"
                        pos_hint:{"center_x":.2, "center_y":.5}
                    RecycleView:
			            id:contact
			            key_viewclass: 'viewclass'
			            key_size: 'height'
			            RecycleBoxLayout:
			                id:wali
			                spacing:dp(10)
			                padding: dp(10)
			                default_size: None, dp(70)
			                default_size_hint: 1, None
			                size_hint_y: None
			                height: self.minimum_height
			                orientation:"vertical"

            MDBottomNavigationItem:
                name: 'account'
                text: 'Account'
                icon: 'account'
    MDScreen:
        name:"contacts"
        MDBoxLayout:
            orientation:"vertical"
            spacing:dp("10")
            MDTopAppBar:
	            title: "contacts"
	            elevation: 1
	            pos_hint: {"top": 1}
	            md_bg_color: "#D5BDAF"
	            specific_text_color: "#4a4939"
	            right_action_items: [["account-plus", lambda x: app.add_from_contact()]]
			MDLabel:
				text:"Selected("+app.contact_count+")"
				halign:"center"
				size_hint_y:None
				height: self.texture_size[1]
	            width: self.texture_size[1]
            RecycleView:
	            id: contactss
	            key_viewclass: 'viewclass'
	            key_size: 'height'
	            RecycleBoxLayout:
	                id:wali
	                spacing:dp(10)
	                padding: dp(10)
	                default_size: None, dp(70)
	                default_size_hint: 1, None
	                size_hint_y: None
	                height: self.minimum_height
	                orientation:"vertical"
    MDScreen:
        name:"favourite"
        MDBoxLayout:
            orientation:"vertical"
            md_bg_color:"#eaf4f4"
            MDBoxLayout:
                adaptive_height:True
                MDFloatLayout:
                    MDLabel:
                        text:"Specials Buyers"
                        size_hint_y: .1
                        height: self.texture_size[1]
                        halign:"center"
                        font_size:"21sp"
                        color:"#0B4F6C"
                        pos_hint:{"center_x":.25, "center_y":.5}
                    MDFloatingActionButton:
                        icon: "message-text-outline"
                        type:"standard"
                        md_bg_color:"#2e4052"
                        text_color:"#ffffff"
                        pos_hint:{"center_x":.9, "center_y":.5}

            RecycleView:
	            id: contacts
	            key_viewclass: 'viewclass'
	            key_size: 'height'
	            RecycleBoxLayout:
	                id:wali
	                spacing:dp(10)
	                padding: dp(10)
	                default_size: None, dp(70)
	                default_size_hint: 1, None
	                size_hint_y: None
	                height: self.minimum_height
	                orientation:"vertical"
    MDScreen:
        name:"sell"
        MDFloatLayout:
            orientation:"vertical"
            md_bg_color:"#eaf4f4"
            MDLabel:
                text:"Send Order"
                size_hint_y: .1
                height: self.texture_size[1]
                halign:"center"
                font_size:"21sp"
                color:"#0B4F6C"
                pos_hint:{"center_x":.2, "center_y":.92}
            MDLabel:
                text:"Customer Name"
                size_hint_y: .1
                height: self.texture_size[1]
                halign:"center"
                font_size:"18sp"
                color:"#474747"
                pos_hint:{"center_x":.25, "center_y":.8}
            MDTextField:
                id:customer_name
                mode: "rectangle"
                hint_text:"Enter Customer Name"
                size_hint_x:.8
                pos_hint:{"center_x":.5, "center_y":.73}
                font_size: dp(18)
                foreground_color: 53 / 225, 59 / 225, 60 / 225, 1
                line_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                fill_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                hint_text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                halign: 'left'
            MDLabel:
                text:"Customer Number"
                size_hint_y: .1
                height: self.texture_size[1]
                halign:"center"
                font_size:"18sp"
                color:"#474747"
                pos_hint:{"center_x":.27, "center_y":.64}
            NumberOnlyField:
                id:customer_number
                mode: "rectangle"
                hint_text:"Enter customer number"
                size_hint_x:.8
                pos_hint:{"center_x":.5, "center_y":.57}
                font_size: dp(18)
                foreground_color: 53 / 225, 59 / 225, 60 / 225, 1
                line_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                fill_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                hint_text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                halign: 'left'
            MDLabel:
                text:"Product ID"
                size_hint_y: .1
                height: self.texture_size[1]
                halign:"center"
                font_size:"18sp"
                color:"#474747"
                pos_hint:{"center_x":.2, "center_y":.48}
            MDTextField:
                id:product_id
                mode: "rectangle"
                hint_text:"Enter product ID"
                size_hint_x:.8
                pos_hint:{"center_x":.5, "center_y":.42}
                font_size: dp(18)
                foreground_color: 53 / 225, 59 / 225, 60 / 225, 1
                line_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                fill_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                hint_text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                halign: 'left'
            MDRaisedButton:
                text:"Submit"
                md_bg_color:  "#0B4F6C"
                text_color: "#FFFFFF"
                size_hint:.5,.08
                pos_hint:{"center_x":.5, "center_y":.2}
                on_release:
                    app.set_order_opt()

    MDScreen:
        name:"edit_sms"
        MDFloatLayout:
            md_bg_color:"#eaf4f4"
            MDLabel:
                text:"Edit Sms"
                halign:"center"
                font_size:"21sp"
                color:"#0B4F6C"
                pos_hint:{"center_x":.2, "center_y":.93}
            MDBoxLayout:
                size_hint_y: None
                height: self.minimum_height  # This will allow the layout to grow as text is added.
                md_bg_color:"#2e4052"
                width:app.size_x/1.2
                size_hint_x:None
                pos_hint:{"center_x":.5, "center_y":.7}
                radius:5
                MDLabel:
                    id: story_label
                    text: app.sms_sent  # Your story text goes here
                    theme_text_color: "Custom"
                    text_color: "white"
                    font_style: "Body1"
                    halign: "center"
                    size_hint_y: None
                    height: self.texture_size[1]
                    pos_hint: {"center_x": .5}
            MDTextField:
                id:sms_edit
                mode: "rectangle"
                hint_text:"Enter number"
                size_hint_x:.8
                pos_hint:{"center_x":.5, "center_y":.4}
                font_size: dp(18)
                foreground_color: 53 / 225, 59 / 225, 60 / 225, 1
                line_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                fill_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                hint_text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                halign: 'left'
                on_text:
                    app.sms_sent = sms_edit.text

            MDRaisedButton:
                text:"Submit"
                md_bg_color:  "#2e4052"
                text_color: "#FFFFFF"
                size_hint:.5,.08
                pos_hint:{"center_x":.5, "center_y":.2}
                on_release:
                    app.edit_sms(sms_edit.text)
                    sms_edit.text = ''
                    story_label.text = app.sms_sent

    MDScreen:
        name:"premium1"
        MDFloatLayout:
            orientation:"vertical"
            md_bg_color:"#eaf4f4"
            MDLabel:
                text:"Premium"
                size_hint_y: .1
                height: self.texture_size[1]
                halign:"center"
                font_size:"21sp"
                color:"#d4af37"
                pos_hint:{"center_x":.2, "center_y":.95}
            Carry:
                pos_hint:{"center_x":.5, "center_y":.65}
                md_bg_color:"#d4af37"
                MDFloatLayout:
                    MDLabel:
                        text:"Premium user"
                        halign:"center"
                        color:"white"
                        pos_hint:{"center_x":.5, "center_y":.82}
                    MDIcon:
                        icon:"crown-outline"
                        halign:"center"
                        font_size:"30dp"
                        color:"white"
                        pos_hint:{"center_x":.9, "center_y":.87}
                    MDLabel:
                        text:"[s] 5,000/= [/s]"
                        halign:"left"
                        markup:True
                        color:"white"
                        font_size:"30sp"
                        pos_hint:{"center_x":.6, "center_y":.5}
                    MDLabel:
                        text:"Exp: 27/6/2024"
                        halign:"left"
                        color:"white"
                        font_size:"12sp"
                        pos_hint:{"center_x":1.1, "center_y":.2}
    MDScreen:
        name:"premium"
        MDFloatLayout:
            orientation:"vertical"
            md_bg_color:"#eaf4f4"
            MDLabel:
                text:"Premium"
                size_hint_y: .1
                height: self.texture_size[1]
                halign:"center"
                font_size:"21sp"
                color:"#d4af37"
                pos_hint:{"center_x":.2, "center_y":.92}
            Carry:
                pos_hint:{"center_x":.5, "center_y":.75}
                md_bg_color:"#d4af37"
                MDFloatLayout:
                    MDLabel:
                        text:"Total Earnings(TZS)"
                        halign:"center"
                        color:"white"
                        pos_hint:{"center_x":.25, "center_y":.82}
                    MDLabel:
                        text:"5,000/="
                        halign:"left"
                        color:"white"
                        font_size:"32sp"
                        pos_hint:{"center_x":.6, "center_y":.5}
            MDLabel:
                text:"Customer Email"
                size_hint_y: .1
                height: self.texture_size[1]
                halign:"center"
                font_size:"18sp"
                color:"#474747"
                pos_hint:{"center_x":.25, "center_y":.8-.25}
            MDTextField:
                id:pcustomer_name
                mode: "rectangle"
                hint_text:"Enter Email"
                size_hint_x:.8
                pos_hint:{"center_x":.5, "center_y":.73-.25}
                font_size: dp(18)
                foreground_color: 53 / 225, 59 / 225, 60 / 225, 1
                line_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                fill_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                hint_text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                halign: 'left'
            MDLabel:
                text:"Customer Number"
                size_hint_y: .1
                height: self.texture_size[1]
                halign:"center"
                font_size:"18sp"
                color:"#474747"
                pos_hint:{"center_x":.27, "center_y":.64-.25}
            NumberOnlyField:
                id:pcustomer_number
                mode: "rectangle"
                hint_text:"Enter number"
                size_hint_x:.8
                pos_hint:{"center_x":.5, "center_y":.57-.25}
                font_size: dp(18)
                foreground_color: 53 / 225, 59 / 225, 60 / 225, 1
                line_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                fill_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                hint_text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                text_color_focus: 53 / 225, 59 / 225, 60 / 225, 1
                halign: 'left'

            MDRaisedButton:
                text:"Proceed"
                md_bg_color:  "#d4af37"
                text_color: "#FFFFFF"
                size_hint:.5,.08
                pos_hint:{"center_x":.5, "center_y":.13}
                on_release:
                    app.go_premium_opt()



<Contacts>:
	text: root.name
	secondary_text: root.phone
	ImageLeftWidget:
	    source:root.image
	RightCheckbox:
		id: lcb
		on_press:
			root.state_changed()
			app.action(self, root.phone, root.name)
        state: 'down' if root.selected else 'normal'


<Carry@MDCard>:
	md_bg_color:"#2e4052"
	orientation:"vertical"
	radius:dp(28)
	adaptive_height:True
#	height:"1"
	size_hint:None, None
	size:app.size_x/1.2,app.size_y/4

<Display@MDBoxLayout>:
	md_bg_color:"#BCDCDC"
	orientation:"vertical"
	radius:dp(20)
	#adaptive_height:True
	size_hint:None, None
	size:app.size_x/2.9,app.size_y/6
	posx:.4
	name:""
	number:""
	FloatLayout:
		MDLabel:
			text:root.name
			halign:"center"
			font_size:"17sp"
			pos_hint:{'center_x':root.posx, 'center_y':.75}
		MDLabel:
			text:root.number
			halign:"left"
			font_size:"30sp"
			pos_hint:{'center_x':.9, 'center_y':.4}

<Buyers>:
	text: root.name
	secondary_text: root.phone
	ImageLeftWidget:
	    source:root.image

<Spin>:
    adaptive_height: True
    spacing: dp(5)
    MDSpinner:
        size_hint: None, None
        size: dp(25), dp(25)
        pos_hint: {'center_x': .5, 'center_y': 1}
        active: True
        color: 78 / 255, 82 / 255, 84 / 255, 1
    MDLabel:
        text:'Loading...'
        bold:True
#        font_name:'components/fonts/Gill Sans.otf'
        theme_text_color: "Custom"
        text_color:78/255, 82/255, 84/255, 1
        pos_hint: {'center_x': .5, 'center_y': 1}